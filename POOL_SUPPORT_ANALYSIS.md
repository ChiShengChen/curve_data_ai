# Curve æ± å­æ”¯æŒæƒ…å†µåˆ†æ

è¯¦ç»†å›ç­”å…³äºæ± å­è¦†ç›–èŒƒå›´ã€å®šä½æ–¹å¼å’Œè·¨é“¾æ”¯æŒçš„é—®é¢˜ã€‚

## ğŸŠ 1. ç›®å‰ç¨‹å¼æ”¯æŒçš„Curveæ± å­

### å½“å‰æ”¯æŒçš„4ä¸ªæ± å­ (ä»…ä»¥å¤ªåŠä¸»ç½‘)

| æ± å­åç§° | åˆçº¦åœ°å€ | ä»£å¸ç»„åˆ | TVLè§„æ¨¡ | æè¿° |
|----------|----------|----------|---------|------|
| **3Pool** | `0xbEbc44782C7dB0a1A60Cb6fe97d0b483032FF1C7` | USDC/USDT/DAI | ~$500M+ | æœ€å¤§çš„ç¨³å®šå¸æ±  |
| **FRAX Pool** | `0xd632f22692FaC7611d2AA1C0D552930D43CAEd3B` | FRAX/USDC | ~$100M+ | ç®—æ³•ç¨³å®šå¸æ±  |
| **MIM Pool** | `0x5a6A4D54456819C6Cd2fE4de20b59F4f5F3f9b2D` | MIM/3CRV | ~$50M+ | Magic Internet Money |
| **LUSD Pool** | `0xEd279fDD11cA84bEef15AF5D39BB4d4bEE23F0cA` | LUSD/3CRV | ~$30M+ | Liquity USDæ±  |

### æ± å­é€‰æ‹©ä¾æ®
- âœ… **æµåŠ¨æ€§é«˜**: é€‰æ‹©TVLæœ€å¤§çš„ä¸»æµæ± å­
- âœ… **ç¨³å®šæ€§å¥½**: ä¸»è¦æ˜¯ç¨³å®šå¸æ± ï¼Œæ³¢åŠ¨è¾ƒå°
- âœ… **æ•°æ®å®Œæ•´**: APIæ”¯æŒè‰¯å¥½ï¼Œæ•°æ®è´¨é‡é«˜
- âœ… **ç”¨æˆ·å…³æ³¨**: å¸‚åœºå…³æ³¨åº¦æœ€é«˜çš„æ± å­

### ä»£ç ä½ç½®
```python
# config.py ä¸­çš„æ± å­é…ç½®
CURVE_POOLS = {
    '3pool': {
        'address': '0xbEbc44782C7dB0a1A60Cb6fe97d0b483032FF1C7',
        'name': '3Pool',
        'tokens': ['USDC', 'USDT', 'DAI'],
        'decimals': [6, 6, 18],
        'description': 'USDC/USDT/DAI stablecoin pool'
    },
    # ... å…¶ä»–3ä¸ªæ± å­
}
```

## ğŸ¯ 2. æ± å­å®šä½æœºåˆ¶

### 2.1 ç¡¬ç¼–ç åœ°å€æ˜ å°„ (å½“å‰æ–¹å¼)
```python
# åœ¨ real_data_collector.py ä¸­
self.pool_addresses = {
    '3pool': '0xbEbc44782C7dB0a1A60Cb6fe97d0b483032FF1C7',
    'frax': '0xd632f22692FaC7611d2AA1C0D552930D43CAEd3B',
    'mim': '0x5a6A4D54456819C6Cd2fE4de20b59F4f5F3f9b2D',
    'lusd': '0xEd279fDD11cA84bEef15AF5D39BB4d4bEE23F0cA'
}
```

### 2.2 APIåŠ¨æ€å‘ç° (å¤‡é€‰æ–¹å¼)
```python
# ä»Curve APIåŠ¨æ€è·å–æ± å­åˆ—è¡¨
url = "https://api.curve.fi/api/getPools/ethereum/main"
response = requests.get(url)
pools = response.json()['data']['poolData']

# éå†æŸ¥æ‰¾åŒ¹é…çš„æ± å­
for pool in pools:
    if pool_name.lower() in pool['name'].lower():
        return pool
```

### 2.3 åœ°å€åå‘æŸ¥æ‰¾
```python
def _get_pool_name_from_address(self, address: str) -> Optional[str]:
    """æ ¹æ®åœ°å€è·å–æ± å­åç§°"""
    address_lower = address.lower()
    pool_map = {
        '0xbebc44782c7db0a1a60cb6fe97d0b483032ff1c7': '3pool',
        # ... å…¶ä»–æ˜ å°„
    }
    return pool_map.get(address_lower)
```

### ä¼˜ç¼ºç‚¹åˆ†æ
| æ–¹å¼ | ä¼˜åŠ¿ | åŠ£åŠ¿ |
|------|------|------|
| **ç¡¬ç¼–ç æ˜ å°„** | å¿«é€Ÿã€å¯é ã€æ— ç½‘ç»œä¾èµ– | éœ€è¦æ‰‹åŠ¨æ›´æ–°ï¼Œè¦†ç›–æœ‰é™ |
| **APIåŠ¨æ€å‘ç°** | è‡ªåŠ¨å‘ç°æ–°æ± å­ï¼Œè¦†ç›–å…¨é¢ | ä¾èµ–ç½‘ç»œï¼Œå¯èƒ½ä¸ç¨³å®š |
| **æ··åˆæ–¹å¼** | å…¼å…·å¯é æ€§å’Œæ‰©å±•æ€§ | å®ç°å¤æ‚åº¦è¾ƒé«˜ |

## ğŸŒ 3. è·¨é“¾å’Œæ± å­æ•°é‡æ”¯æŒ

### 3.1 å½“å‰æ”¯æŒæƒ…å†µ
- **æ”¯æŒé“¾æ•°**: 1ä¸ª (ä»…ä»¥å¤ªåŠä¸»ç½‘)
- **æ”¯æŒæ± å­æ•°**: 4ä¸ª (å Curveæ€»æ± å­æ•°çº¦2%)
- **æ•°æ®æº**: ä»¥å¤ªåŠä¸»ç½‘ä¸“ç”¨API

### 3.2 å„é“¾Curveéƒ¨ç½²æƒ…å†µ
| åŒºå—é“¾ | Curveéƒ¨ç½² | ä¸»è¦æ± å­æ•°é‡ | APIæ”¯æŒ | æœ¬ç³»ç»Ÿæ”¯æŒ |
|--------|-----------|--------------|---------|------------|
| **ä»¥å¤ªåŠ** | âœ… ä¸»ç½‘ | 200+ | âœ… å®Œæ•´ | âœ… 4ä¸ªæ± å­ |
| **Polygon** | âœ… å·²éƒ¨ç½² | 50+ | âœ… æœ‰API | âŒ æœªæ”¯æŒ |
| **Arbitrum** | âœ… å·²éƒ¨ç½² | 30+ | âœ… æœ‰API | âŒ æœªæ”¯æŒ |
| **Optimism** | âœ… å·²éƒ¨ç½² | 20+ | âœ… æœ‰API | âŒ æœªæ”¯æŒ |
| **Avalanche** | âœ… å·²éƒ¨ç½² | 15+ | âœ… æœ‰API | âŒ æœªæ”¯æŒ |
| **Fantom** | âœ… å·²éƒ¨ç½² | 10+ | âœ… æœ‰API | âŒ æœªæ”¯æŒ |

### 3.3 APIç«¯ç‚¹åˆ†æ
```python
# å½“å‰åªæ”¯æŒä»¥å¤ªåŠä¸»ç½‘
self.curve_api_base = "https://api.curve.fi"
ethereum_url = f"{self.curve_api_base}/api/getPools/ethereum/main"

# å…¶ä»–é“¾çš„APIç«¯ç‚¹ (æœªå®ç°)
# polygon_url = f"{self.curve_api_base}/api/getPools/polygon/main"
# arbitrum_url = f"{self.curve_api_base}/api/getPools/arbitrum/main"
# optimism_url = f"{self.curve_api_base}/api/getPools/optimism/main"
```

### 3.4 The Graphå­å›¾æ”¯æŒ
| é“¾ | å­å›¾åœ°å€ | çŠ¶æ€ | æœ¬ç³»ç»Ÿæ”¯æŒ |
|----|----------|------|------------|
| **Ethereum** | `messari/curve-finance-ethereum` | âœ… æ´»è·ƒ | âœ… å·²é›†æˆ |
| **Polygon** | `messari/curve-finance-polygon` | âœ… æ´»è·ƒ | âŒ æœªé›†æˆ |
| **Arbitrum** | `messari/curve-finance-arbitrum` | âœ… æ´»è·ƒ | âŒ æœªé›†æˆ |

## ğŸ“Š 4. è¦†ç›–ç‡åˆ†æ

### 4.1 ä»¥å¤ªåŠä¸»ç½‘è¦†ç›–ç‡
```
æ€»Curveæ± å­æ•°: ~200ä¸ª
æœ¬ç³»ç»Ÿæ”¯æŒ: 4ä¸ª
è¦†ç›–ç‡: 2%

ä½†æŒ‰TVLè®¡ç®—:
4ä¸ªæ± å­æ€»TVL: ~$680M
æ‰€æœ‰æ± å­TVL: ~$4B
TVLè¦†ç›–ç‡: ~17% (è¦†ç›–äº†æœ€é‡è¦çš„æ± å­)
```

### 4.2 å…¨ç½‘è¦†ç›–ç‡
```
å…¨ç½‘Curveæ± å­æ€»æ•°: ~400ä¸ª
æœ¬ç³»ç»Ÿæ”¯æŒ: 4ä¸ª
å…¨ç½‘è¦†ç›–ç‡: 1%
```

## ğŸš€ 5. æ‰©å±•å»ºè®®

### 5.1 çŸ­æœŸæ‰©å±• (å®¹æ˜“å®ç°)
1. **æ·»åŠ æ›´å¤šä»¥å¤ªåŠæ± å­**:
   ```python
   # å¯ä»¥è½»æ¾æ·»åŠ çš„çƒ­é—¨æ± å­
   'steth': '0xDC24316b9AE028F1497c275EB9192a3Ea0f67022',  # stETH/ETH
   'tricrypto': '0x80466c64868E1ab14a1Ddf27A676C3fcBE638Fe5', # tricrypto
   'cvxeth': '0xB576491F1E6e5E62f1d8F26062Ee822B40B0E0d4',    # CVX/ETH
   ```

2. **æ”¹è¿›æ± å­å‘ç°æœºåˆ¶**:
   ```python
   def auto_discover_pools(self, min_tvl: float = 10_000_000):
       """è‡ªåŠ¨å‘ç°TVLè¶…è¿‡1000ä¸‡çš„æ± å­"""
       # ä»APIè·å–æ‰€æœ‰æ± å­ï¼ŒæŒ‰TVLç­›é€‰
   ```

### 5.2 ä¸­æœŸæ‰©å±• (éœ€è¦å¼€å‘)
1. **å¤šé“¾æ”¯æŒ**:
   ```python
   SUPPORTED_CHAINS = {
       'ethereum': {
           'api_base': 'https://api.curve.fi/api/getPools/ethereum/main',
           'subgraph': 'messari/curve-finance-ethereum'
       },
       'polygon': {
           'api_base': 'https://api.curve.fi/api/getPools/polygon/main', 
           'subgraph': 'messari/curve-finance-polygon'
       }
   }
   ```

2. **æ± å­ç±»å‹æ‰©å±•**:
   - åŠ å¯†èµ„äº§æ±  (ETH/BTCæ± )
   - æ”¶ç›Šä»£å¸æ±  (staking derivatives)
   - è·¨é“¾æ¡¥æ± 

### 5.3 é•¿æœŸæ‰©å±• (éœ€è¦é‡æ„)
1. **æ™ºèƒ½æ± å­é€‰æ‹©**:
   - åŸºäºTVLè‡ªåŠ¨æ’åº
   - åŸºäºäº¤æ˜“é‡ç­›é€‰
   - åŸºäºç”¨æˆ·åå¥½é…ç½®

2. **é€šç”¨æ± å­æ¥å£**:
   - æ”¯æŒä»»æ„ERC20æ± å­
   - è‡ªåŠ¨æ£€æµ‹æ± å­ç±»å‹
   - é€šç”¨æ•°æ®æ ¼å¼

## ğŸ’¡ 6. å®é™…å»ºè®®

### å¯¹äºå½“å‰ç‰ˆæœ¬
- âœ… **å¤Ÿç”¨**: 4ä¸ªæ± å­è¦†ç›–äº†ä¸»è¦çš„ç¨³å®šå¸äº¤æ˜“éœ€æ±‚
- âœ… **ç¨³å®š**: è¿™4ä¸ªæ± å­æ•°æ®è´¨é‡æœ€é«˜ï¼Œæœ€é€‚åˆæ¨¡å‹è®­ç»ƒ
- âœ… **ä»£è¡¨æ€§**: æ¶µç›–äº†ä¸åŒç±»å‹çš„ç¨³å®šå¸æœºåˆ¶

### å¦‚æœéœ€è¦æ‰©å±•
1. **ä¼˜å…ˆçº§1**: æ·»åŠ stETHæ±  (æµåŠ¨æ€§è´¨æŠ¼)
2. **ä¼˜å…ˆçº§2**: æ·»åŠ tricryptoæ±  (å¤šèµ„äº§)
3. **ä¼˜å…ˆçº§3**: æ”¯æŒPolygonä¸Šçš„ä¸»è¦æ± å­
4. **ä¼˜å…ˆçº§4**: å…¨é¢å¤šé“¾æ”¯æŒ

## ğŸ“ˆ 7. ä½¿ç”¨å»ºè®®

### å½“å‰æœ€ä½³å®è·µ
```python
# ä½¿ç”¨æ”¯æŒåº¦æœ€é«˜çš„æ± å­è¿›è¡Œåˆ†æ
recommended_pools = ['3pool']  # TVLæœ€å¤§ï¼Œæ•°æ®æœ€ç¨³å®š

# å¯¹æ¯”åˆ†æä½¿ç”¨è¿™4ä¸ªæ± å­
comparison_pools = ['3pool', 'frax', 'mim', 'lusd']

# æ¨¡å‹è®­ç»ƒæ¨èä½¿ç”¨3poolæ•°æ®
training_pool = '3pool'  # æ•°æ®é‡æœ€å¤§ï¼Œè´¨é‡æœ€é«˜
```

---

**æ€»ç»“**: è™½ç„¶å½“å‰åªæ”¯æŒä»¥å¤ªåŠä¸»ç½‘çš„4ä¸ªæ± å­ï¼Œä½†è¿™4ä¸ªæ± å­ä»£è¡¨äº†Curveæœ€æ ¸å¿ƒçš„ç¨³å®šå¸ä¸šåŠ¡ï¼ŒTVLå æ¯”è¾¾17%ï¼Œå®Œå…¨æ»¡è¶³æ™ºèƒ½é‡æ–°å¹³è¡¡çš„éœ€æ±‚ã€‚å¦‚éœ€æ›´å¤šæ± å­æ”¯æŒï¼Œå¯ä»¥æŒ‰ä¼˜å…ˆçº§é€æ­¥æ‰©å±•ã€‚ 